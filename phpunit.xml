<phpunit
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://schema.phpunit.de/4.6/phpunit.xsd"
    bootstrap="../../../core/tests/bootstrap.php"
    colors="true"
    stopOnFailure="false"
    stopOnError="false"
    verbose="true">

    <testsuites>
        <testsuite name="DKAN Test Suite">
            <directory>modules/common/tests</directory>
            <directory>modules/common/modules/dkan_alt_api/tests</directory>
            <directory>modules/metastore/tests</directory>
            <directory>modules/metastore/modules/metastore_content_type/tests</directory>
            <directory>modules/metastore/modules/metastore_search/tests</directory>
            <directory>modules/metastore/modules/metastore_form/tests</directory>
            <directory>modules/metastore/modules/metastore_admin/tests</directory>
            <directory>modules/datastore/tests</directory>
            <directory>modules/frontend/tests</directory>
            <directory>modules/harvest/tests</directory>
        </testsuite>
    </testsuites>

    <groups>
        <exclude>
            <group>requires-database</group>
        </exclude>
    </groups>

    <php>
        <!-- These variables may alternatively be set as environment variables. -->
        <!-- E.g., `DRUPAL_VERSION=V8 ./vendor/bin/phpunit` -->
        <env name="DRUPAL_VERSION" value="V8"/>
        <env name="SIMPLETEST_BASE_URL" value="http://web"/>
    </php>
    <filter>
        <!-- whitelist needed for code coverage generation to work -->
        <whitelist>
          <directory>modules/common/src</directory>
          <directory>modules/common/modules/dkan_alt_api/src</directory>
          <directory>modules/metastore/src</directory>
          <directory>modules/metastore/modules/metastore_content_type/src</directory>
          <directory>modules/metastore/modules/metastore_search/src</directory>
          <directory>modules/metastore/modules/metastore_form/src</directory>
          <directory>modules/metastore/modules/metastore_admin/src</directory>
          <directory>modules/datastore/src</directory>
          <directory>modules/frontend/src</directory>
          <directory>modules/harvest/src</directory>
      <!-- By definition test classes have no tests. -->
      <exclude>
        <directory>modules/common/src/Tests</directory>
        <directory suffix="Test.php">./</directory>
        <directory suffix="TestBase.php">./</directory>
      </exclude>
        </whitelist>
    </filter>
</phpunit>
