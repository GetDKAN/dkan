{
    "components": {
        "parameters": {
            "showReferenceIds": {
                "name": "show-reference-ids",
                "in": "query",
                "description": "Metastore objects often include references to other objects stored in other schemas. These references are usually hidden in responses. Some identifiers are necessary to work with other API endpoints (e.g. datastore endpoints may require the distribution identifier). Add `?show-reference-ids` to show the identifiers generated by DKAN.",
                "schema": {
                    "type": "boolean",
                    "default": false
                },
                "style": "form",
                "allowEmptyValue": true
            },
            "schemaId": {
                "name": "schema_id",
                "in": "path",
                "description": "The name a of a specific schema. For instance, \"dataset.\"",
                "schema": {
                    "type": "string"
                },
                "required": true,
                "allowEmptyValue": false,
                "examples": []
            }
        },
        "responses": {
            "412MetadataObjectNotFound": {
                "description": "Missing object, usually due to incorrect identifier.",
                "content": {
                    "application/json": {
                        "schema": { "$ref": "#/components/schemas/errorResponse" },
                        "example": {
                            "message": "No data with the identifier 00000000-0000-0000-0000-000000000000 was found.",
                            "status": 412,
                            "timestamp": "2021-06-14T13:46:06+00:00"
                        }
                    }
                }
            }

        },
        "schemas": {
            "metastoreWriteResponse": {
                "type": "object",
                "properties": {
                    "endpoint": {
                        "type": "string",
                        "description": "Path to the metadata from the API."
                    },
                    "identifier": {
                        "type": "string",
                        "description": "Identifier for metadata just created or modified."
                    }
                }
            }
        }
    },
    "paths": {
        "/api/1/metastore/schemas": {
            "get": {
                "operationId": "metastore-get-schemas",
                "summary": "Get list of all schemas",
                "tags": [ "Metastore" ],
                "responses": {
                    "200": {
                        "description": "List of metastore schemas.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "description": "Full collection of available metastore schemas"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/1/metastore/schemas/{schema_id}": {
            "get": {
                "operationId": "metastore-get-schema",
                "summary": "Get a specific schema",
                "tags": [ "Metastore" ],
                "parameters": [
                    { "$ref": "#/components/parameters/schemaId" }
                ],
                "responses": {
                    "200": {
                        "description": "Ok",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "description": "A schema definition, see https://json-schema.org/",
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Schema not found"
                    }
                }
            }
        },
        "/api/1/metastore/schemas/{schema_id}/items": {
            "get": {
                "operationId": "metastore-get-all",
                "summary": "Get all items for a specific schema (e.g., \"dataset\")",
                "tags": [ "Metastore" ],
                "parameters": [
                    { "$ref": "#/components/parameters/schemaId" },
                    { "$ref": "#/components/parameters/showReferenceIds" }

                ],
                "responses": {
                    "200": {
                        "description": "Ok",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "description": "Array of metastore items matching the chosen schema.",
                                    "items": { "type": "object"}
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/1/metastore/schemas/dataset/items/{identifier}/docs": {
            "get": {
                "operationId": "docs-get-dataset-specific",
                "summary": "Dataset-specific json documentation",
                "tags": [
                    "Metastore: documentation"
                ],
                "parameters": [
                    { "$ref": "#/components/parameters/datasetUuid" }
                ],
                "responses": {
                    "200": {
                        "description": "Ok",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}