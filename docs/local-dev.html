<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DKAN: Local development environment</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="all.min.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <img alt="Logo" src="logo.svg"/>
  </div>
  <!-- <div id="projectname">DKAN</div> -->
  <div id="projectdetails">
    <span id="projectbrief">Alpha</span>
    <span id="projectnumber">v2.0.2</span>
  </div>
  <div id="search">
            <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('local-dev.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Local development environment </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md17">Requirements</a></li>
<li class="level2"><a href="#autotoc_md18">Starting a new project</a></li>
<li class="level2"><a href="#autotoc_md19">Installing DKAN</a><ul><li class="level3"><a href="#autotoc_md20">Setting up the front end</a></li>
<li class="level3"><a href="#autotoc_md21">Dummy content</a></li>
</ul>
</li>
</ul>
</ul>
</div>
<div class="textblock"><p>For either working on a project locally or working on the core DKAN software and libraries, using a standardized, <a href="https://www.docker.com/">docker</a>-based local environment is recommended. Our <a href="https://github.com/getdkan/dkan-tools">DKAN Tools</a> command-line utility will work on Mac or Linux to create containers for the various services needed by DKAN. This will ensure you have the same setup as DKAN's core developers, and that your environment is very close to that of our continuous integration tools.</p>
<p>It is possible, though not reccomended, to use DKAN Tools without docker and using your system's native webserver, php, and database tools; see the DKAN Tools documentation.</p>
<p>If you are making changes or improvements to DKAN, contribute back using the <a href="https://help.github.com/categories/collaborating-with-issues-and-pull-requests/">standard fork and pull-request workflow in Gitihub</a>.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Requirements</h2>
<p>To get DKAN working on your computer with our toolset you will need the following:</p>
<ul>
<li>A Linux or Mac computer (Windows support coming soon)</li>
<li><a href="https://git-scm.com/downloads">Git</a></li>
<li><a href="https://www.docker.com/community-edition#/download">Docker CE</a> (recommended version: 17.12.1-ce)</li>
<li><a href="https://docs.docker.com/compose/install/">Docker Compose</a> (recommended version: 1.19.0)</li>
<li><a href="https://github.com/getdkan/dkan-tools">DKAN-Tools</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Starting a new project</h2>
<p>Follow instructions in the <a href="https://github.com/getdkan/dkan-tools">README</a> to get dkan-tools working on your system. The dkan-tools README is still focused on <a class="el" href="namespaceDrupal.html">Drupal</a> 7 ("DKAN 1") usage. While the basic installation instructions are the same for either scenario, installing and working with DKAN requires the following steps. <br  />
</p>
<ol type="1">
<li><p class="startli">Assuming you have dkan-tools installed and working locally, you will need to create an environment variable <code>DRUPAL_VERSION</code> and set it to <code>V8</code>.</p>
<p class="startli">``` $ export DRUPAL_VERSION=V8 ```</p>
<p class="startli">Now DTKL in your current session will know to use only <a class="el" href="namespaceDrupal.html">Drupal</a> 8 commands. If you are only using DKAN2 and are not using dkan-tools to manage any <a class="el" href="namespaceDrupal.html">Drupal</a> 7-based DKAN projects, you may want to add the same <code>export</code> command to your .bashrc or .bash_profile file.</p>
</li>
<li>Create a directory for your project: <code>mkdir &lt;directory-name&gt; &amp;&amp; cd &lt;directory-name&gt;</code></li>
<li>Initialize your project with dkan-tools: <code>dktl init</code></li>
</ol>
<h2><a class="anchor" id="autotoc_md19"></a>
Installing DKAN</h2>
<ol type="1">
<li>Get <a class="el" href="namespaceDrupal.html">Drupal</a>: <code>dktl get &lt;drupal-version&gt;</code> (currnet recommended version: 8.7.3)</li>
<li>Get <a class="el" href="namespaceDrupal.html">Drupal</a> dependencies, and install DKAN plus the frontend application: <code>dktl make --frontend</code></li>
<li>Most likely, dkan-tools will complain that your version of Drush is out-of-date. Upgrade with <code>dktl updatedrush</code></li>
<li>Install DKAN: <code>dktl install</code></li>
<li>Access the site: <code>dktl drush uli</code></li>
</ol>
<dl class="section note"><dt>Note</dt><dd>If you are working directly on the DKAN project or one of its libraries and want to be able to commit changes and submit pull requests, use the <code>--prefer-source</code> option with <code>dktl make</code>. This option will be passed directly to Composer; see the <a href="https://getcomposer.org/doc/03-cli.md#command-line-interface-commands">Composer CLI documentation</a> for more details.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should <em>only</em> use the built-in <code>dktl updatedrush</code> command when using our Docker-based environment.</dd></dl>
<h3><a class="anchor" id="autotoc_md20"></a>
Setting up the front end</h3>
<p>The last step above will provide a link to log in to the new site as "user 1" (admin) without a password, using a port of localhost. This will allow you to create user accounts and content, and otherwise manage your DKAN site using the <a class="el" href="namespaceDrupal.html">Drupal</a> administration pages.</p>
<p>To see your public data portal, however, you will need to set up the <a href="https://reactjs.org/">React</a>-based front-end application (a separate software package originally created as part of <a href="https://github.com/interra/data-catalog-frontend">Interra</a>. To do this, set up a proxy that will expose your <a class="el" href="namespaceDrupal.html">Drupal</a> installation via the url "http://dkan":</p>
<ol type="1">
<li>Add <code>dkan</code> to **/etc/hosts**</li>
<li>Start the proxy:</li>
</ol>
<div class="fragment"><div class="line">$ docker run -d -p 80:80 -v /var/run/docker.sock:/tmp/docker.sock:ro jwilder/nginx-proxy</div>
</div><!-- fragment --><p>The output of this command will tell you what URL to visit to see the DKAN frontend.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Dummy content</h3>
<p>To populate your site with example content, and then remove it:</p>
<div class="fragment"><div class="line">$ drush dkan-dummy-content:create</div>
<div class="line">$ drush dkan-dummy-content:remove</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
