<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DKAN: Updating and Maintaining DKAN</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script src="https://kit.fontawesome.com/4f4525663e.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <img alt="Logo" src="logo.svg"/>
  </div>
  <!-- <div id="projectname">DKAN</div> -->
  <div id="projectdetails">
    <span id="projectbrief">Open Data Catalog</span>
    <span id="projectnumber">v2.0.0</span>
  </div>
  <div id="search">
            <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dev-maintain.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Updating and Maintaining DKAN </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md5">Filesystem Conventions</a></li>
<li class="level2"><a href="#autotoc_md6">Primary Maintenance Tasks</a></li>
<li class="level2"><a href="#autotoc_md7">Getting DKAN Updates</a><ul><li class="level3"><a href="#autotoc_md8">Basic Upgrades</a></li>
<li class="level3"><a href="#autotoc_md9">Overriding current DKAN modules or functionality</a></li>
</ul>
</li>
</ul>
</ul>
</div>
<div class="textblock"><p>There are several strategies for maintaining your DKAN site. Maintaining a DKAN site does not differ substantially from <a href="https://www.drupal.org/docs/8/configuration-management">maintaining other Drupal sites</a>.</p>
<dl class="section note"><dt>Note</dt><dd><em class="fas fa-toolbox" style="color: #42b983"></em> <a href="https://github.com/GetDKAN/dkan-tools">DKAN Tools</a> is a project containing commands and tools that <a href="https://civicactions.com/dkan/">CivicActions</a> uses for our own implementations and deployments.</dd></dl>
<h2><a class="anchor" id="autotoc_md5"></a>
Filesystem Conventions</h2>
<p>With <a class="el" href="namespaceDrupal.html">Drupal</a>'s inheritance model, it should not be necessary to place custom code or modules in the <code>modules/contrib/dkan</code> directory. Additional modules, themes, or libraries, or newer versions of ones already present in <code>modules/contrib/dkan</code>, can be placed in <code>modules/custom</code>, <code>themes/custom</code>, or <code>libraries/custom</code>. This will make maintaining your DKAN site much easier.</p>
<p>If it is necessary or expedient to overwrite files in the <code>modules/contrib/dkan</code> directory, it is recommended to keep a <a href="https://ariejan.net/2009/10/26/how-to-create-and-apply-a-patch-with-git/">patch</a> of the changes. A patch will make it possible to re-apply changes once a newer version of DKAN is added to the <code>modules/contrib/dkan</code> directory.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Primary Maintenance Tasks</h2>
<p>By "maintenance" we mean three specific tasks</p>
<ul>
<li><b>Upgrading</b> DKAN to receive new features and bug-fixes</li>
<li><b>Adding</b> additional modules or features</li>
<li><b>Overriding</b> current modules or functionally</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Getting DKAN Updates</h2>
<p>DKAN uses a slightly modified <a href="https://www.drupal.org/docs/8/understanding-drupal-version-numbers">semantic</a> versioning system.</p>
<p><b>Major.Minor.Patch</b></p>
<ul>
<li><em>Major</em> indicates compatibility</li>
<li><em>Minor</em> indicates backwards incompatilble new features or upgrades</li>
<li><em>Patch</em> indicates a release for security updates, bug fixes, and backwards compatible improvements</li>
</ul>
<p>Please note <em>you can not use</em> <code>drush up</code> <em>with DKAN</em>. This is because DKAN is not packaged on Drupal.org.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Basic Upgrades</h3>
<p>If you are maintaining your site with <a href="https://github.com/getdkan/dkan-tools">DKAN Tools</a>, upgrading is as simple as running</p>
<p><code>dktl make --tag=&lt;tag version&gt;</code></p>
<p>Or update the version number in your compser.json file and run <code>composer update</code>:</p>
<div class="fragment"><div class="line">&quot;require&quot;: {</div>
<div class="line">    &quot;getdkan/dkan&quot;: &quot;2.0.0&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Overriding current DKAN modules or functionality</h3>
<p><a class="el" href="namespaceDrupal.html">Drupal</a> has an inheritance model that makes it easy to override modules. Ideally you should keep all of your customizations outside of your docroot and symlink the overrides to the appropriate directory inside docroot.</p>
<div class="fragment"><div class="line">src/modules/ -&gt; docroot/modules/custom</div>
<div class="line">src/themes/  -&gt; docroot/themes/custom</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
